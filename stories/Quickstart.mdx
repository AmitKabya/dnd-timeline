# Quickstart

### Context

Use the `useTimeline` hook, and expose the `TimelineBag` using the `TimelineProvider`.

the `TimelineProvider` doesn't wrap you code with the `DndContext`, so you will need to do it yourself.  
This also means that you can put the `DndContext` anywhere you want, allowing for integration with external DnD lists and timeline's.

To define a timeline container div, youll need to pass the `timelineRef` as a `ref` to that element, and pass the funtional styling as well.

```jsx
import { DndContext } from '@dnd-kit/core'
import { Timeline, useTimeline } from 'dnd-timeline'

function TimelineContainer() {
  const timelineBag = useTimeline({
    // Timeline options
  })

  return (
    <DndContext>
      <TimelineProvider value={timelineBag}>
        <div ref={timelineBag.timelineRef} style={timelineBag.style}>
          {
            // rows and items
          }
        </div>
      </TimelineProvider>
    </DndContext>
  )
}
```

### Rows

The `Row` component acts as a [Droppable](https://docs.dndkit.com/api-documentation/droppable) for items to be dropped into.

To create a row component, use the `useRow` hook.  
To get going, you can use this simple Row HOC component:

```jsx
import React, { ReactNode, useMemo } from 'react'
import { RowDefinition, useRow } from 'dnd-timeline'

interface RowProps extends RowDefinition {
  id: string
  sidebar: ReactNode
  children: ReactNode
}

function Row(props: RowProps) {
  const {
    isOver,
    rowStyle,
    setNodeRef,
    setSidebarRef,
    rowWrapperStyle,
    rowSidebarStyle,
  } = useRow({
    id: props.id,
    disabled: props.disabled,
  })

  return (
    <div style={rowWrapperStyle}>
      <div ref={setSidebarRef} style={rowSidebarStyle}>
        {props.sidebar}
      </div>
      <div
        ref={setNodeRef}
        style={rowStyle}
      >
        {props.children}
      </div>
    </div>
  )
}
```

You can then use this row component to wrap you items on each rows.  
rows should be an array of type `RowDefinition[]`

```jsx
<div ref={timelineBag.timelineRef} style={timelineBag.style}>
  {rows.map((row) => (
    <Row
      id={row.id}
      key={row.id}
      sidebar={<div style={{ width: 200 }}>{row.id}</div>}
    >
      {
        // you items here
      }
    </Row>
  ))}
</div>
```

### Items

The `Item` component acts as a [Draggable](https://docs.dndkit.com/api-documentation/draggable).

To create a row component, use the `useItem` hook.  
To get going, you can use this simple Item HOC component:

```jsx
import React, { ReactNode, useMemo } from 'react'
import { ItemDefinition, useItem } from 'dnd-timeline'

interface ItemProps extends ItemDefinition {
  children: ReactNode;
}

function Item(props: ItemProps) {
  const { itemStyle, listeners, attributes, setNodeRef, itemContentStyle } =
    useItem({
      id: props.id,
      relevance: props.relevance,
    })

  return (
    <div ref={setNodeRef} style={itemStyle} {...listeners} {...attributes}>
      <div style={itemContentStyle}>{props.children}</div>
    </div>
  )
}
```

You can then use it to wrap you own item components, that are going to be displayed inside each item.

`groupedItems` is an object of type `Record<string, ItemDefinition[]>`, but you can do it however you see fit.

```jsx
<div ref={timelineBag.timelineRef} style={timelineBag.style}>
  {rows.map((row) => (
    <Row
      id={row.id}
      key={row.id}
      sidebar={<div style={{ width: 200 }}>{row.id}</div>}
    >
      {groupedItems[row.id]?.map((item) => (
        <Item
          id={item.id}
          key={item.id}
          rowId={row.id}
          relevance={item.relevance}
        >
          {
            // Item content
          }
        </Item>
      ))}
    </Row>
  ))}
</div>
```

Add a little bit of styling, and you will get something like this:

import { Canvas } from '@storybook/blocks'
import { UnstackedItems } from './1 - Timeline/Timeline.stories.tsx'

<Canvas of={UnstackedItems} />
You can find all of the examples' code in the [github repository](https://github.com/samuelarbibe/dnd-timeline/tree/main/stories)
